(this.webpackJsonpposenet=this.webpackJsonpposenet||[]).push([[0],{10:function(e,t,n){e.exports=n(17)},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(7),o=n.n(c),i=(n(15),n(4)),u=n.n(i),s=n(8),l=n(1),d=n(9),h=n(5),f=n(2),m={app:{height:"100vh",background:"linear-gradient(rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.7)), url(/background.jpg) no-repeat center center fixed",flexDirection:"column"},header:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#FF3737"},count:{zIndex:10,color:"#223AE8"},video:{display:"none"},canvas:{top:"80%"}};var p=function(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null),n={width:640,height:360},c=Object(r.useState)(0),o=Object(l.a)(c,2),i=o[0],p=o[1],g=Object(r.useState)(0),v=Object(l.a)(g,2),b=v[0],w=v[1],O=Object(r.useRef)({left:!1,right:!1}),j=Object(r.useRef)(!1),k=Object(r.useState)(null),E=Object(l.a)(k,2),y=E[0],L=E[1],x=Object(r.useState)(null),M=Object(l.a)(x,2),S=M[0],C=M[1],I=Object(r.useState)(null),q=Object(l.a)(I,2),D=q[0],F=q[1],R=Object(r.useState)(10),T=Object(l.a)(R,2),W=T[0],B=T[1],N=Object(r.useState)(!1),P=Object(l.a)(N,2),J=P[0],U=P[1];function z(){clearTimeout(S),clearTimeout(D),C(null),F(null)}function A(t){var n=e.current.getContext("2d");if(n.save(),n.clearRect(0,0,e.current.width,e.current.height),n.drawImage(t.image,0,0,e.current.width,e.current.height),Object(f.drawConnectors)(n,t.poseLandmarks,h.POSE_CONNECTIONS,{color:"#F5E07E",lineWidth:2}),Object(f.drawLandmarks)(n,t.poseLandmarks,{color:"#223BE9",lineWidth:1,radius:2}),t.poseLandmarks){var r=t.poseLandmarks[11],a=t.poseLandmarks[12],c=t.poseLandmarks[13],o=t.poseLandmarks[14],i=t.poseLandmarks[15],u=t.poseLandmarks[16],s=$(r,c,i),l=$(a,o,u);s>160&&(O.current.left="down"),s<30&&"down"===O.current.left&&(O.current.left="up"),l>160&&(O.current.right="down"),l<30&&"down"===O.current.right&&(O.current.right="up"),"up"===O.current.left&&"up"===O.current.right&&(p((function(e){return e+1})),L("curl"),O.current.left=!1,O.current.right=!1);var d=t.poseLandmarks[23],m=t.poseLandmarks[24],g=t.poseLandmarks[25],v=t.poseLandmarks[26],b=t.poseLandmarks[27],k=t.poseLandmarks[28],E=$(d,g,b),y=$(m,v,k);E<90&&y<90&&(j.current=!0),E>160&&y>160&&j.current&&(w((function(e){return e+1})),L("squat"),j.current=!1)}n.restore()}function $(e,t,n){var r=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),a=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)),c=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));return Math.acos((r*r+a*a-c*c)/(2*r*a))*(180/Math.PI)}return Object(r.useEffect)((function(){var e;return W>0?e=setInterval((function(){B((function(e){return e-1}))}),1e3):(U(!0),p(0),w(0)),function(){return clearInterval(e)}}),[W]),Object(r.useEffect)((function(){J&&L("squat")}),[J]),Object(r.useEffect)((function(){var e=new h.Pose({locateFile:function(e){return"https://cdn.jsdelivr.net/npm/@mediapipe/pose/".concat(e)}});return e.setOptions({modelComplexity:1,smoothLandmarks:!0,enableSegmentation:!0,smoothSegmentation:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),e.onResults(A),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:n}).then((function(r){t.current.srcObject=r,t.current.onloadedmetadata=function(){new d.Camera(t.current,{onFrame:function(){var n=Object(s.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.send({image:t.current});case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),width:n.width,height:n.height}).start()}})).catch((function(e){console.error("Failed to get user media",e)})),function(){e.close()}}),[]),Object(r.useEffect)((function(){if(y||(w(0),p(0),O.current={left:!1,right:!1},j.current=!1),"squat"===y&&!S){var e=setTimeout((function(){L("curl"),z()}),5e3);C(e)}if("curl"===y&&!D){var t=setTimeout((function(){L("squat"),z()}),5e3);F(t)}}),[y,S,D]),a.a.createElement("div",{style:m.app},a.a.createElement("header",{style:m.header},a.a.createElement("video",{ref:t,style:m.video}),a.a.createElement("canvas",{ref:e,style:m.canvas}),a.a.createElement("canvas",{ref:e,style:{top:"80%",width:n.width,height:n.height}}),J?null:a.a.createElement("h1",null,"\u30ab\u30a6\u30f3\u30c8\u30c0\u30a6\u30f3\uff1a ",W),J?a.a.createElement("h1",{style:m.count},"\u30a2\u30fc\u30e0\u30ab\u30fc\u30eb\u306e\u56de\u6570\uff1a ",i):null,J?a.a.createElement("h1",{style:m.count},"\u30b9\u30af\u30ef\u30c3\u30c8\u306e\u56de\u6570\uff1a ",b):null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.3c3b0e7e.chunk.js.map